<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <h:form>

            <ui:composition template="./../templates/MyTemplate.xhtml">

                <ui:define name="title_page">
                    <div align="center">
                        <h2>Users Management</h2>
                        <hr/>
                    </div>
                </ui:define>

                <ui:define name="content_page">
                    <h:commandLink action="UserForm.xhtml"
                                   actionListener="#{UsersManagedBean.createUser()}" 
                                   value="Create New User" ></h:commandLink>
                </ui:define>

                <ui:define name="view_page">
                    <h:dataTable value="#{UsersManagedBean.usersList}" var="users"
                                   styleClass="users-table" style="width: 80%"
                             headerClass="users-table-header"
                             rowClasses="users-table-odd-row,users-table-even-row"  >
                        <h:column>
                            <f:facet name="header">Id</f:facet>
                                #{users.userId}
                        </h:column>



                        <h:column>
                            <f:facet name="header">Name</f:facet>
                                #{users.userName}
                        </h:column>

                        <h:column>
                            <f:facet name="header">Mail</f:facet>
                                #{users.userEmail}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Actions</f:facet>
                            <h:commandLink  value="Edit" actionListener="#{UsersManagedBean.editUser(users.userId)}" /> &nbsp; &nbsp;
                            <h:commandLink value="Delete" 
                                           action="#{UsersManagedBean.deleteUser(users.userId)}"
                                           actionListener="#{UsersManagedBean.editUser(user.userId)}"
                                           onclick="if (!confirm('Really delete this ?')) {return false; } ; return true;"  />
                        </h:column>

                    </h:dataTable>
                </ui:define>

            </ui:composition>

        </h:form>
    </body>
</html>
